# 复用类

## 7.1 组合语法

几种初始化的方式：

1. 在定义对象的位置初始化引用可以在调用构造器之前就完成初始化
1. 在类的构造器中
1. 在对象要被使用时，这种方式被称为惰性初始化，可以减少额外负担
1. 使用实例初始化（写在类中的代码块)

## 7.2 继承语法

当创建了一个导出类的对象时，该对象包含了一个基类的子对象。二者区别在于，后者来自于外部，而基类的子对象被包装在导出类对象的内部。

对基类子对象的初始化至关重要。在构造器中调用基类构造器来执行初始化，而基类构造器具有执行基类初始化所需要的所有知识和能力。Java会在导出类的构造器中插入对基类构造器的调用。

对于基类带参数的构造器，如果导出类不进行显示调用，编译器会发出错误提醒。而且，调用基类构造器必须是你在导出类构造器中要做的第一件事。

## 7.3 代理

讲一个成员对象置于所要构造的类中，但与此同时我们在新类中暴露了该成员对象的所有方法。将基类对象作为一个成员对象置于代理类中，通过代理类的方法定义，可以对基类功能的暴露进行选择。

## 7.4 结合使用组合和继承

在导出类中定义基类具有的同名方法，但是参数或返回类型不同，则这两个方法同时存在。

## 7.5 在组合与继承之间选择

组合技术通常用于想在新类中使用现有类的功能而非它的接口这种情况，为此需要在新类中嵌入一个现有类的private对象。

## 7.6 protected关键字

protected提供包访问权限，导出类也能够进行访问。

## 7.7 向上转型

导出类向基类进行转型，这种较专用类型向较通用类型转换总是安全的。导出类是基类的一个超集，具有更多的方法。在向上转型的过程中，类接口唯一可能发生的是方法丢失。

一般不推荐使用继承，但如果有导出类向基类向上转型的需求，则继承是必要的。

## 7.8 final关键字

final适用于：

1. 一个永不改变的编译时常量
1. 一个在运行时初始化，之后不再改变的值

final常量在第一次使用前必须进行赋值，一个既是static又是final的域只占据一段不能改变的存储空间

非基本类型的final引用，它指向的地址是不变的，对象本身可以改变。

Java允许空白final，可以只定义不赋值，但必须在使用前进行赋值（域的定义处或构造器中）。

在参数列表中指明参数为final，则方法不会改变改参数

在之前版本的Java中，使用final关键字修饰方法可以让执行效率提高

使用final的好处：

1. final关键字提高了性能。JVM和Java应用都会缓存final变量。
1. final变量可以安全的在多线程环境下进行共享，而不需要额外的同步开销。
1. 使用final关键字，JVM会对方法、变量及类进行优化。

private方法隐式地为final，final类中的方法相同

## 7.9 初始化及类的加载

类是在任何static成员被访问时进行加载的（构造器隐式为static），main方法也是static的